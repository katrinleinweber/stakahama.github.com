<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Project organization and structure</title>
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Satoshi Takahama" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="http://stakahama.github.io/resources/css/zenburn.css"/>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Project organization and structure</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">Directory structure</a></li>
<li><a href="#sec-2">Using relative paths</a></li>
<li><a href="#sec-3">Archival</a></li>
<li><a href="#sec-4">When larger data files are maintained in a separate repository</a></li>
</ul>
</div>
</div>
<p>
This page describes how I manage my files and directories for each project. The notation "<code>~/</code>" indicates the user's home directory, and "<code>./</code>" indicates a project directory.
</p>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">Directory structure</h2>
<div class="outline-text-2" id="text-1">
<p>
In my <code>~/Documents/</code> folder, I have professional and personal documents groups under subdirectories <code>Work/</code> and <code>Personal/</code>, respectively. Within <code>Work/</code>, I have the work grouped by institution (<code>CMU/</code>, <code>UCSD/</code>, <code>EPFL/</code>). Taking <code>UCSD/</code> as an example, I have a subdirectory <code>projects/</code>, in which I maintain separate subdirectories for projects in progress (e.g., <code>CalMex/</code>, <code>SmogChamber/</code>, <code>Whistler/</code>). Within each project directory ("<code>./</code>"), I have a set of subdirectories that serve specific purposes:
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Directory</th>
<th scope="col" class="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left"><code>./correspondence/</code></td>
<td class="left">notable correspondence from/with collaborators</td>
</tr>

<tr>
<td class="left"><code>./data/</code></td>
<td class="left">data accessible for programs and reports</td>
</tr>

<tr>
<td class="left"><code>./lib/</code></td>
<td class="left">initially empty; snapshot of the global library will be placed here upon archival</td>
</tr>

<tr>
<td class="left"><code>./paper/</code></td>
<td class="left">can optionally be plural if multiple publications are to be expected from the project</td>
</tr>

<tr>
<td class="left"><code>./presentations/</code></td>
<td class="left">repository for presentations</td>
</tr>

<tr>
<td class="left"><code>./programs/</code></td>
<td class="left">programs typically downloaded from revision control repository (e.g., ftir, stxm, pscf, pmf\<sub>nt</sub>)</td>
</tr>

<tr>
<td class="left"><code>./reports/</code></td>
<td class="left">"reports" summary documents, and one-off calculations</td>
</tr>
</tbody>
</table>

<p>
An example of sub-hierarchies within each subdirectory (defined relative to <code>./</code>, the top-level project directory) is illustrated below:
</p>
<ul class="org-ul">
<li><code>./correspondence/</code>
<ul class="org-ul">
<li><code>Person1/</code>
</li>
<li><code>Person2/</code>
</li>
<li><code>...</code>
</li>
</ul>
</li>
<li><code>./data/</code>
<ul class="org-ul">
<li><code>lognotes/</code>
</li>
<li><code>ftir/</code>
</li>
<li><code>stxm/</code>
</li>
<li><code>...</code>
</li>
</ul>
</li>
<li><code>./paper/</code>
<ul class="org-ul">
<li><code>version1/</code>
</li>
<li><code>version2/</code>
</li>
<li><code>submitted/</code>
</li>
<li><code>revised/</code>
</li>
<li><code>...</code>
</li>
</ul>
</li>
<li><code>./presentations/</code>
<ul class="org-ul">
<li><code>YYYY\_AAAR/</code>
</li>
<li><code>YYYY\_AGU/</code>
</li>
<li><code>...</code>
</li>
</ul>
</li>
<li><code>./programs/</code>
<ul class="org-ul">
<li><code>lib/</code>
</li>
<li><code>ftir/</code>
</li>
<li><code>stxm/</code>
</li>
<li><code>pscf/</code>
</li>
<li><code>...</code>
</li>
</ul>
</li>
<li><code>./reports/</code>
<ul class="org-ul">
<li><code>01topic/</code>
</li>
<li><code>02topic/</code>
</li>
<li><code>...</code>
</li>
</ul>
</li>
</ul>

<p>
In addition to the subdirectories listed above, I have a set of user-defined libraries common to all projects in my <code>$HOME</code> directory, denoted as <code>~/lib/</code>.
</p>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">Using relative paths</h2>
<div class="outline-text-2" id="text-2">
<p>
With the exception of <code>~/lib/</code>, I use relative paths to access data from programs (i.e., the working directory for each interpreter &#x2013; R, Python, Matlab, etc. is the directory in which the script is located). For example, the location of the <code>.DPT</code> files (contained in <code>./data/ftir/</code>) relative to the <code>./programs/ftir/</code> directory is <code>../../data/ftir/</code>; the location of the <code>.xim</code> files (contained in <code>./data/stxm/</code>) relative to the <code>./programs/stxm/</code> directory is <code>../../data/stxm/</code>; libraries specific to this project can be loaded from <code>../lib/</code> (not to be confused with <code>~/lib/</code>). 
</p>

<p>
Some prefer to maintain a single workspace from which all project files are accessed (not all at once) &#x2014; e.g., by setting <code>default-ess-directory</code> in Emacs to <code>~/Documents/MyRwork</code>. If this is done, all paths in scripts are defined relative to this default directory (or at this point might consider absolute paths, which would be difficult to edit later).
#the working directory for every project begins with <code>projects/MyRwork</code> and 
</p>

<p>
So using local working directories (instead of the single workspace) can produce project folders containing a series of (mostly) self-contained scripts. For instance, scripts in a <code>./reports/</code> subdirectory, e.g. <code>./reports/01first-ftir-analysis/script.r</code> (I begin the name of each subdirectory of <code>./reports/</code> with two integers to establish the chronology of work &#x2014; and sorted alpha-numerically in this way &#x2014; permitting same or similar <i>topic</i> labels during different phases of the projects), can access the same <code>.DPT</code> files as aforementioned programs with the relative path designation of <code>../../data/ftir/</code>, or an output of the ftir program with the relative path designation of <code>../../programs/ftir/outputs/</code>; libraries shared by this project can be loaded from <code>../../programs/lib/</code>. The only set of scripts not contained in this project folder are those located in the <code>~/lib/</code> directory.
</p>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">Archival</h2>
<div class="outline-text-2" id="text-3">
<p>
After completing the project, I will move the project directory to a separate directory called <code>~/Documents/Archive/YYYY_{projectname}</code> (partly so that the project can be stored in a self-contained directory on a separate hard-drive). Using relative paths in scripts and programs (as described above) makes the transition simple. At the time of project archival, I will also copy a snapshot of the global <code>~/lib/</code> library into the archived project directory. This library can be loaded by setting <code>$HOME</code> to project directory (which will now contain the original library, <code>~/lib/</code>, as an immediate subdirectory, <code>./lib/</code>). For instance, if the library is archived together with the rest of the project as <code>~/Documents/Archive/{YYYY_projectname}/lib/</code>, then executing the command,
</p>
<div class="org-src-container">

<pre class="src src-sh">$ export HOME=~/Documents/Archive/{YYYY_projectname}
</pre>
</div>
<p>
in a bash shell should be sufficient, and the contents of the library can accessed with <code>~/lib/</code> in R and Matlab, or <code>os.path.join(os.environ['HOME'],'lib')</code> [alternatively,  
</p>
<code>os.path.expanduser('~/lib')</code>
<p>
] in Python.
</p>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4">When larger data files are maintained in a separate repository</h2>
<div class="outline-text-2" id="text-4">
<p>
With molecular dynamics simulations, I generate a large number of large files which I backup in separately from the project directory. R, Python, and possibly other languages can read files directly from a remote server, but sometimes it is more convenient to download a chunk of data into <code>~/tmp/md/runs/</code>, which is symbolically linked to <code>./runs/</code> by <code>ln -svf ~/tmp/md/runs/ ./runs</code>. The assumption is that these files will be periodically purged from <code>~/tmp/md/runs/</code> to save hard disk space on the local machine (presumably with limited hard disk space), so if certain analyses depend on specific files in the remote hierarchy, it may be best to save these pieces of code with the data; with the code making reference to the fixed directory structure in the archive (i.e., take the code to the location of the data).
</p>
</div>
</div>
</div>
<div id="postamble" class="status">
<hr>
Generated by Org-mode 8.2.10 with Emacs 24
</div>
</body>
</html>
